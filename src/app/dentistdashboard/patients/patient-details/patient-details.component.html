<section>
  <div class="row">
    <div class="col-12 col-sm-6 col-md-12">
      <div class="card card-primary card-outline card-tabs">
        <div class="card-header p-0 pt-1 border-bottom-0">
          <ul class="nav nav-tabs" id="custom-tabs-three-tab" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="overview-tab" data-toggle="pill" href="#overview" role="tab" aria-controls="overview" aria-selected="true">Overview</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="medical-history-tab" data-toggle="pill" href="#medical-history" role="tab" aria-controls="medical-history" aria-selected="false">Medical History</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="treatment-tab" data-toggle="pill" href="#treatment" role="tab" aria-controls="treatment" aria-selected="false">Treatment</a>
            </li>
          </ul>
        </div>
        <div class="card-body">
          <div class="tab-content" id="custom-tabs-three-tabContent">
            <!-- Overview Tab -->
            <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview-tab">
              <div class="row">
                <!-- Patient Info Section -->
                <div class="col-md-3">
                  <div class="card card-primary card-outline">
                    <div class="card-body box-profile">
                      <div class="text-center">
                        <img class="profile-user-img img-fluid img-circle" src="assets/img/user4-128x128.jpg" alt="User profile picture">
                      </div>
                      <h3 class="profile-username text-center">{{ patientData.name }}</h3>
                      <p class="text-muted text-center">{{ patientData.email }}</p>
                      <ul class="list-group list-group-unbordered mb-3">
                        <li class="list-group-item"><b>Birthdate</b> <span class="float-right">{{ patientData.birthdate }}</span></li>
                        <li class="list-group-item"><b>Phone</b> <span class="float-right">{{ patientData.phone }}</span></li>
                        <li class="list-group-item"><b>Address</b> <span class="float-right">{{ patientData.address }}</span></li>
                      </ul>
                    </div>
                  </div>
                </div>
                <!-- Appointment and Prescription Section -->
                <div class="col-md-9">
                  <div class="card">
                    <div class="card-header p-2">
                      <ul class="nav nav-pills">
                        <li class="nav-item"><a class="nav-link active" href="#appointment" data-toggle="tab">Appointment</a></li>
                        <li class="nav-item"><a class="nav-link" href="#prescription" data-toggle="tab">Prescription</a></li>
                      </ul>
                    </div>
                    <div class="card-body">
                      <div class="tab-content">
                        <!-- Appointment Tab -->
                        <div class="tab-pane fade show active" id="appointment">
                          <app-patient-appointment-table></app-patient-appointment-table>
                        </div>
                        <!-- Prescription Tab -->
                        <div class="tab-pane fade" id="prescription">
                          <table id="example3" class="table table-bordered table-hover">
                            <thead>
                              <tr>
                                <th>Date</th>
                                <th>Medicine</th>
                                <th>Notes</th>
                              </tr>
                            </thead>
                            <tbody></tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Medical History Tab -->
            <div class="tab-pane fade" id="medical-history" role="tabpanel" aria-labelledby="medical-history-tab">
              <div class="row">
                <!-- Dental History Section -->
                <div class="col-md-6">
                  <div class="card">
                    <div class="card-header">
                      <button class="btn btn-primary" data-toggle="modal" data-target="#addDentalHistoryModal">
                        <i class="fas fa-plus"></i> Add Dental History
                      </button>
                    </div>
                    <div class="card-body">
                      <table id="dentalhistory" class="table table-bordered table-hover">
                        <thead>
                          <tr>
                            <th>Previous Dentist</th>
                            <th>Last Dental Visit</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody></tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <!-- Medical History Section -->
                <div class="col-md-6">
                  <div class="card">
                    <div class="card-header">
                      <button class="btn btn-primary" data-toggle="modal" data-target="#addMedicalHistoryModal">
                        <i class="fas fa-plus"></i> Add Medical History
                      </button>
                    </div>
                    <div class="card-body">
                      <table id="medicalhistory" class="table table-bordered table-hover">
                        <thead>
                          <tr>
                            <th>Allergies</th>
                            <th>Illnesses</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody></tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Treatment Tab -->
            <div class="tab-pane fade" id="treatment" role="tabpanel" aria-labelledby="treatment-tab">
              <div class="card">
                <div class="card-body">
                  <table id="example5" class="table table-bordered table-hover">
                    <thead>
                      <tr>
                        <th>Date Visit</th>
                        <th>Teeth No./s</th>
                        <th>Treatment</th>
                        <th>Description</th>
                        <th>Fees</th>
                        <th>Remarks</th>
                      </tr>
                    </thead>
                    <tbody></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Add Dental History Modal -->
<div class="modal fade" id="addDentalHistoryModal" tabindex="-1" role="dialog" aria-labelledby="addDentalHistoryModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Dental History</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="previousDentist">Previous Dentist</label>
            <input type="text" class="form-control" id="previousDentist" placeholder="Enter previous dentist">
          </div>
          <div class="form-group">
            <label for="lastDentalVisit">Last Dental Visit</label>
            <input type="date" class="form-control" id="lastDentalVisit">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Submit</button>
      </div>
    </div>
  </div>
</div>

<!-- Add Medical History Modal -->
<!-- <div class="modal fade" id="addMedicalHistoryModal" tabindex="-1" role="dialog" aria-labelledby="addMedicalHistoryModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Medical History</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="allergies">Allergies</label>
            <input type="text" class="form-control" id="allergies" placeholder="Enter allergies">
          </div>
          <div class="form-group">
            <label for="illnesses">Illnesses</label>
            <input type="text" class="form-control" id="illnesses" placeholder="Enter illnesses">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Submit</button>
      </div>
    </div>
  </div>
</div> -->

<!-- Modal for Editing Medical History -->
<div class="modal fade" id="editMedicalHistoryModal" tabindex="-1" role="dialog" aria-labelledby="editMedicalHistoryModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editMedicalHistoryModalLabel">Edit Medical History</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="editMedicalHistoryForm">
          <!-- Allergies Field -->
          <div class="form-group">
            <label for="editAllergies">Allergies</label>
            <input 
              type="text" 
              class="form-control" 
              id="editAllergies" 
              name="allergies" 
              placeholder="Enter allergies"
              required
              aria-describedby="allergiesHelp" />
            <small id="allergiesHelp" class="form-text text-muted">Example: Peanuts, Penicillin</small>
          </div>
          <!-- Illnesses Field -->
          <div class="form-group">
            <label for="editIllnesses">Illnesses</label>
            <input 
              type="text" 
              class="form-control" 
              id="editIllnesses" 
              name="illnesses" 
              placeholder="Enter illnesses"
              required
              aria-describedby="illnessesHelp" />
            <small id="illnessesHelp" class="form-text text-muted">Example: Asthma, Diabetes</small>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button 
          type="button" 
          class="btn btn-secondary" 
          data-dismiss="modal" 
          aria-label="Close">
          Close
        </button>
        <button 
          type="button" 
          class="btn btn-primary" 
          id="saveMedicalHistoryChanges" 
          aria-label="Save Changes">
          Save Changes
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Modal for Editing Dental History -->
<div class="modal fade" id="editDentalHistoryModal" tabindex="-1" role="dialog" aria-labelledby="editDentalHistoryModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editDentalHistoryModalLabel">Edit Dental History</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="editDentalHistoryForm">
          <!-- Previous Dentist Field -->
          <div class="form-group">
            <label for="editPreviousDentist">Previous Dentist</label>
            <input 
              type="text" 
              class="form-control" 
              id="editPreviousDentist" 
              name="previousDentist" 
              placeholder="Enter previous dentist's name"
              required
              aria-describedby="previousDentistHelp" />
            <small id="previousDentistHelp" class="form-text text-muted">Example: Dr. John Smith</small>
          </div>
          <!-- Last Dental Visit Field -->
          <div class="form-group">
            <label for="editLastDentalVisit">Last Dental Visit</label>
            <input 
              type="date" 
              class="form-control" 
              id="editLastDentalVisit" 
              name="lastDentalVisit"
              required />
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button 
          type="button" 
          class="btn btn-secondary" 
          data-dismiss="modal" 
          aria-label="Close">
          Close
        </button>
        <button 
          type="button" 
          class="btn btn-primary" 
          id="saveDentalHistoryChanges" 
          aria-label="Save Changes">
          Save Changes
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Add Medical History Modal -->
<div class="modal fade" id="addMedicalHistoryModal" tabindex="-1" role="dialog" aria-labelledby="addMedicalHistoryModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addMedicalHistoryModalLabel">Add Medical History</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="medicalHistoryForm">
          <!-- Question 1 -->
          <div class="form-group">
            <label for="isGoodHealth">Are you in good health?</label>
            <input type="text" class="form-control" id="isGoodHealth" name="isGoodHealth" placeholder="Enter response">
          </div>
          <!-- Question 2 -->
          <div class="form-group">
            <label for="medicalTreatment">Are you under medical treatment now? If so, what is the condition being treated?</label>
            <input type="text" class="form-control" id="medicalTreatment" name="medicalTreatment" placeholder="Enter response">
          </div>
          <!-- Question 3 -->
          <div class="form-group">
            <label for="seriousIllness">Have you ever had a serious illness or surgical operation? If so, what illness or operation?</label>
            <input type="text" class="form-control" id="seriousIllness" name="seriousIllness" placeholder="Enter response">
          </div>
          <!-- Question 4 -->
          <div class="form-group">
            <label for="hospitalized">Have you ever been hospitalized? If so, when and why?</label>
            <input type="text" class="form-control" id="hospitalized" name="hospitalized" placeholder="Enter response">
          </div>
          <!-- Question 5 -->
          <div class="form-group">
            <label for="prescriptionMedication">Are you taking any prescription/non-prescription medication? If so, please specify.</label>
            <input type="text" class="form-control" id="prescriptionMedication" name="prescriptionMedication" placeholder="Enter response">
          </div>
          <!-- Question 6 -->
          <div class="form-group">
            <label for="allergy">Do you have an allergy to any of the following? If so, please specify (e.g., Latex, Penicillin Antibiotics, Aspirin, Sulfa Drugs, Local Anesthetic).</label>
            <input type="text" class="form-control" id="allergy" name="allergy" placeholder="Enter response">
          </div>
          <!-- Question 7 -->
          <div class="form-group">
            <label for="conditions">Do you have or have you had any of the following?</label>
            <div class="row">
              <div class="col-md-6">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="highBloodPressure" name="conditions[]" value="High Blood Pressure">
                  <label class="form-check-label" for="highBloodPressure">High Blood Pressure</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="lowBloodPressure" name="conditions[]" value="Low Blood Pressure">
                  <label class="form-check-label" for="lowBloodPressure">Low Blood Pressure</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="epilepsy" name="conditions[]" value="Epilepsy">
                  <label class="form-check-label" for="epilepsy">Epilepsy</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="hivAids" name="conditions[]" value="AIDS or HIV Infection">
                  <label class="form-check-label" for="hivAids">AIDS or HIV Infection</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="fainting" name="conditions[]" value="Fainting Seizure">
                  <label class="form-check-label" for="fainting">Fainting Seizure</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="weightLoss" name="conditions[]" value="Rapid Weight Loss">
                  <label class="form-check-label" for="weightLoss">Rapid Weight Loss</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="asthma" name="conditions[]" value="Asthma">
                  <label class="form-check-label" for="asthma">Asthma</label>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="heartAttack" name="conditions[]" value="Heart Attack">
                  <label class="form-check-label" for="heartAttack">Heart Attack</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="heartDisease" name="conditions[]" value="Heart Disease">
                  <label class="form-check-label" for="heartDisease">Heart Disease</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="diabetes" name="conditions[]" value="Diabetes">
                  <label class="form-check-label" for="diabetes">Diabetes</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="kidneyDisease" name="conditions[]" value="Kidney Disease">
                  <label class="form-check-label" for="kidneyDisease">Kidney Disease</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="stroke" name="conditions[]" value="Stroke">
                  <label class="form-check-label" for="stroke">Stroke</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="none" name="conditions[]" value="None">
                  <label class="form-check-label" for="none">None</label>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="submitMedicalHistory">Submit</button>
      </div>
    </div>
  </div>
</div>