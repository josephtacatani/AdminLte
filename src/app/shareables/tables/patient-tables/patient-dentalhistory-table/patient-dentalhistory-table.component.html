<section>
  <ng-container *ngIf="filteredDentalHistories$ | async as dentalHistories; else loading">
    <ng-container *ngIf="dentalHistories.length > 0; else noData">
      <app-table-with-edit-delete
        [title]="pagetitle + ' List'"
        [data]="dentalHistories || []"
        [columns]="columns"
        [itemsPerPage]="itemsPerPage"
        [(currentPage)]="currentPage"
        [searchTerm]="searchTerm"
        [pageSizeOptions]="[5, 10, 15, 20]"
        [showAddButton]="true"
        (searchTermChange)="filterDentalHistories($event)"
        (currentPageChange)="currentPage = $event"
        (sort)="sortDentalHistories($event)"
        (actionClick)="handleActionClick($event)"
      ></app-table-with-edit-delete>
    </ng-container>

    <!-- ✅ Show if no dental history data -->
    <ng-template #noData>
      <p class="no-data-message">No dental history records available.</p>
    </ng-template>
  </ng-container>

  <!-- ✅ Loading State -->
  <ng-template #loading>
    <p>Loading dental history details...</p>
  </ng-template>
</section>

<!-- Add/Edit Dental History Modal -->
<app-add-edit-dental-history
  [isVisible]="isAddDentalHistoryModalVisible"
  [title]="modalTitle"
  [dentalHistory]="selectedDentalHistory"
  (close)="closeAddDentalHistoryModal()"
  (submitModal)="handleDentalHistorySubmit($event)"  
></app-add-edit-dental-history>

  <!-- ✅ Success Alert -->
  <app-alert [message]="selectDentalMessage$ | async" type="success"></app-alert>

  <!-- ❌ Error Alert -->
  <app-alert [message]="errorMessage$ | async" type="danger"></app-alert>

  <app-confirm-modal
  [isVisible]="isConfirmModalVisible"
  [title]="'Confirm Deletion'"
  [message]="confirmModalMessage"
  [confirmText]="'Delete'"
  [cancelText]="'Cancel'"
  (closeModal)="isConfirmModalVisible = false"
  (confirmAction)="confirmDelete()"
></app-confirm-modal>
